<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">
        <title>Login</title>
        <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="/flat-ui/dist/css/flat-ui.min.css" />
        <link rel="stylesheet" href="/css/common.css" />
    </head>
    <body>
        <div class="login-wrap">
            <h1>Login</h1>
            <div class="login-form">
                <form id="LOGIN_form">
                    <div class="form-group">
                        <input type="email" name="email" class="form-control login-field" value="" placeholder="Enter your email" id="LOGIN_form_email">
                        <label class="login-field-icon fui-mail" for="LOGIN_form_email"></label>
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" class="form-control login-field" value="" placeholder="Password" id="LOGIN_form_password">
                        <label class="login-field-icon fui-lock" for="LOGIN_form_password"></label>
                    </div>
                    <input type="submit" class="btn btn-primary btn-lg btn-block" value="Login">
                    <input type="button" class="btn btn-inverse btn-lg btn-block" value="Join" data-toggle="modal" data-target="#JOIN_MODAL">
                </form>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="JOIN_MODAL" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Join</h4>
                    </div>
                    <form id="JOIN_form">
                        <div class="modal-body login-form">
                            <div class="form-group">
                                <input type="email" name="email" class="form-control login-field" value="" placeholder="Enter your email" id="JOIN_form_email">
                                <label class="login-field-icon fui-mail" for="JOIN_form_email"></label>
                            </div>
                            <div class="form-group">
                                <input type="text" name="nickname" class="form-control login-field" value="" placeholder="Enter your nickname" id="JOIN_form_nickname">
                                <label class="login-field-icon fui-user" for="JOIN_form_nickname"></label>
                            </div>
                            <div class="form-group">
                                <input type="password" name="password" class="form-control login-field" value="" placeholder="Password" id="LOGIN_form_password">
                                <label class="login-field-icon fui-lock" for="LOGIN_form_password"></label>
                            </div>
                            <div class="form-group">
                                <input type="password" name="repassword" class="form-control login-field" value="" placeholder="Re Password" id="LOGIN_form_repassword">
                                <label class="login-field-icon fui-lock" for="LOGIN_form_repassword"></label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Close"/>
                            <input type="submit" class="btn btn-primary" value="OK"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <script src="/jquery/dist/jquery.min.js"></script>
        <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
        <script>
            $(function() {
                $('#LOGIN_form').submit(function() {
                    $.ajax({
                        url: '/login',
                        method: 'POST',
                        data: $(this).serialize(),
                        success: function(msg) {
                            if (msg) {
                                alert(msg);
                            } else {
                                location.href = '/';
                            }
                        }
                    });

                    return false;
                });

                $('#JOIN_form').submit(function() {
                    $.ajax({
                        url: '/join',
                        method: 'POST',
                        data: $(this).serialize(),
                        success: function(msg) {
                            if (msg) {
                                alert(msg);
                            } else {
                                $('#JOIN_MODAL').modal('hide');
                            }
                        }
                    });

                    return false;
                });
            });
        </script>
    </body>
</html>
